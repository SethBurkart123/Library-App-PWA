import{R as u,r as p,a as l,j as e,c as g}from"./index.5791bf1f.js";import{R as v,g as h}from"./globalVars.97df2e75.js";import{b as N}from"./background.8b6a8ddd.js";import y from"./installPrompt.36576cb2.js";function j(){const o=new v(h.pocketbaseDomain),[f,d]=u.useState(!1),[a,i]=u.useState({username:"",email:"",emailVisibility:!0,password:"",passwordConfirm:""});p.exports.useEffect(()=>{o.authStore.isValid&&(window.location.href="/")});const[t,m]=p.exports.useState({username:"",email:"",password:"",passwordConfirm:""});async function b(s){m({username:"",email:"",password:"",passwordConfirm:""});try{const r=await o.collection("users").create({username:s.username,email:s.email.toLowerCase(),password:s.password,passwordConfirm:s.passwordConfirm});x(s.email.toLowerCase(),s.password)}catch(r){r.data.data.username&&m(n=>({...n,username:r.data.data.username.message})),r.data.data.email&&m(n=>({...n,email:r.data.data.email.message})),r.data.data.password&&m(n=>({...n,password:r.data.data.password.message})),d(!1)}try{const r=await o.collection("users").requestVerification(s.email)}catch{}}const w=s=>{s.preventDefault(),d(!0);let r=!1;a.password==a.passwordConfirm?r=!0:(t.passwordConfirm="The passwords do not match.",d(!1)),a.username&&a.email&&a.password&&r&&b(a)};async function x(s,r){try{const n=await o.collection("users").authWithPassword(s,r),c=new URLSearchParams(window.location.search).get("paymentPlan");c?window.location.href=`payment-redirect?paymentPlan=${c}`:window.location.href=h.homepageDomain+"/pricing"}catch{setLoginError(!0),d(!1)}}return l("div",{className:"w-screen h-screen overflow-hidden",children:[e(y,{}),e("img",{src:N,alt:"background",className:"bottom-1/2 absolute object-cover w-screen h-screen translate-y-1/2"}),l("div",{className:"flex flex-col justify-center items-center h-screen z-10 bg-[#0F252B] overflow-y-scroll touch pb-32 inner-shadow-main",style:{boxShadow:"inset 0px 0px 200px 17px rgba(0,0,0,0.7)"},children:[e("p",{className:"pb-16 text-transparent",children:"aGHHH!!! "}),l("div",{className:"backdrop-blur-3xl bg-white/60 rounded-2xl p-6",style:{boxShadow:"inset 0px 0px 50px -2px rgba(255,255,255,.7),0px 12px 100px 22px rgba(0,0,0,1)"},children:[e("div",{className:"max-w-3xl px-20 pb-4 mx-auto text-center",children:e("h1",{className:"fancy text-3xl font-semibold text-black",children:"Welcome."})}),l("div",{className:"max-w-sm mx-auto",children:[l("form",{onSubmit:w,children:[t.username?e("div",{className:"relative px-4 py-3 mb-2 text-red-700 bg-red-100 border border-red-400 rounded-lg",role:"alert",children:e("span",{className:"sm:inline block",children:t.username})}):null,e("div",{className:"flex flex-wrap mb-4 -mx-3",children:l("div",{className:"w-full px-3",children:[e("label",{className:"block mb-1 text-sm font-medium text-gray-800",htmlFor:"name",children:"Name"}),e("input",{value:a.username,onChange:()=>{i({...a,username:event.target.value})},autoComplete:"off",name:"name",id:"name",type:"name",className:"focus:border-none focus:outline-none border-hidden w-full p-3 text-gray-800 rounded-lg",placeholder:"Enter your name",required:!0})]})}),t.email?e("div",{className:"relative px-4 py-3 mb-2 text-red-700 bg-red-100 border border-red-400 rounded-lg",role:"alert",children:e("span",{className:"sm:inline block",children:t.email})}):null,e("div",{className:"flex flex-wrap mb-4 -mx-3",children:l("div",{className:"w-full px-3",children:[e("label",{className:"block mb-1 text-sm font-medium text-gray-800",htmlFor:"email",children:"Email"}),e("input",{value:a.email,onChange:()=>{i({...a,email:event.target.value})},name:"username",type:"username",className:"focus:border-none focus:outline-none border-hidden w-full p-3 text-gray-800 rounded-lg",placeholder:"Enter your email",required:!0})]})}),e("div",{className:"flex flex-wrap mb-4 -mx-3",children:l("div",{className:"w-full px-3",children:[t.password?e("div",{className:"relative px-4 py-3 mb-2 text-red-700 bg-red-100 border border-red-400 rounded-lg",role:"alert",children:e("span",{className:"sm:inline block",children:t.password})}):null,e("label",{className:"block mb-1 text-sm font-medium text-gray-800",htmlFor:"password",children:"Password"}),e("input",{value:a.password,onChange:()=>{i({...a,password:event.target.value})},type:"password",className:"focus:border-none focus:outline-none border-hidden w-full p-3 text-gray-800 rounded-lg",placeholder:"Enter your password",required:!0})]})}),e("div",{className:"flex flex-wrap mb-4 -mx-3",children:l("div",{className:"w-full px-3",children:[t.passwordConfirm?e("div",{className:"relative px-4 py-3 mb-2 text-red-700 bg-red-100 border border-red-400 rounded-lg",role:"alert",children:e("span",{className:"sm:inline block",children:t.passwordConfirm})}):null,e("label",{className:"block mb-1 text-sm font-medium text-gray-800",htmlFor:"password",children:"Confirm Password"}),e("input",{value:a.passwordConfirm,onChange:()=>{i({...a,passwordConfirm:event.target.value})},type:"password",className:"focus:border-none focus:outline-none border-hidden w-full p-3 text-gray-800 rounded-lg",placeholder:"Enter your password",required:!0})]})}),e("div",{className:"flex flex-wrap mt-6 -mx-3",children:e("div",{className:"w-full px-3",children:f?e("button",{disabled:!0,className:"btn fancy rounded-full w-full text-black bg-[#465943] shadow-black/20 shadow-xl",children:e(g,{className:"rive-loader relative top-0",src:"/animations/loader.riv"})}):e("button",{type:"submit",className:"btn fancy rounded-full hover:bg-[#374635] w-full text-white bg-[#465943] shadow-black/20 shadow-xl",children:"Sign up"})})})]}),l("div",{className:"flex items-center justify-center gap-4 mt-6",children:[e("div",{className:"w-4/12 border-t-2 border-white","aria-hidden":"true"}),e("div",{className:"italic text-gray-900",children:"Or"}),e("div",{className:"w-4/12 border-t-2 border-white","aria-hidden":"true"})]}),l("div",{className:"mt-4 text-center text-gray-900",children:["Already a customer? ",e("a",{href:"/signin",className:"hover:underline text-[#465943] transition duration-150 ease-in-out",children:"Login"})]})]})]})]})]})}export{j as default};
