import{L as B,a as I,b as D}from"./List.29066325.js";import{n as w}from"./noImage.644fcd52.js";import{R as j,g as M,c as N}from"./globalVars.97df2e75.js";import{r,j as e,b as E,F as h,a as n}from"./index.5791bf1f.js";import{D as z,L as A}from"./LoaderButton.83bc68f8.js";function $(a){const u=new j(M.pocketbaseDomain),[g,c]=r.exports.useState(!1),[d,i]=r.exports.useState(!1);return e(E,{overlay:e(h,{children:g?e("div",{className:"bg-black/40 absolute bottom-0 left-0 z-50 grid items-center justify-center w-screen h-screen transition",children:n("div",{className:"bg-wood-side-dark darker px-4 py-2 text-white rounded-lg",style:{boxShadow:"0px 0px 1px 4px rgba(255, 0, 0, 0.4)"},children:[e("h2",{className:"text-xl font-semibold",children:"Are you sure?"}),e("p",{className:"font-light",children:"This will delete this collection forever!"}),n("div",{className:"flex justify-end gap-4 mt-2",children:[e("button",{onClick:()=>c(!1),className:"secondary-button",children:"Cancel"}),e(z,{submitted:submittedDelete,onClick:async()=>{setSubmittedDelete(!0);try{await u.collection("collection").delete(a.data.id)}catch{setSubmittedDelete(!1)}window.location.href="/",window.location.reload(!0)},children:"Delete"})]})]})}):e(h,{})}),topbar:n("div",{className:"bg-black/40 border-b-white/20 backdrop-blur-md sticky top-0 left-0 z-50 flex justify-between px-4 py-2 text-2xl font-medium text-white border-b-2",children:[n("h1",{onClick:()=>a.backFunction(!1),className:"whitespace-nowrap flex gap-2 my-auto overflow-hidden cursor-pointer",children:[e("div",{className:"w-9 h-9",children:e("svg",{className:"w-9 h-9",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e("span",{children:a.data.name})]}),n("a",{onClick:()=>{i(!d)},className:"flex gap-2 cursor-pointer",children:[e("h2",{className:"pl-4 my-auto text-2xl font-light text-center pointer-events-none",children:d?"Cancel":"Edit"}),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",className:"w-6 h-6 my-auto",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})]})]}),children:d?e(R,{client:u,setDeletePrompt:c,setEditMode:i,data:a.data}):n(h,{children:[n("div",{className:"flex flex-col-reverse",children:[e("div",{className:"shelf z-10 text-xl text-white"}),n("div",{className:"justify-right snap-mandatory snap-x z-10 flex items-baseline gap-4 mb-4 overflow-x-scroll",children:[e("div",{className:"min-w-max z-50 text-transparent select-none",children:"AGHHHHHHHHHHHH!!! SAVE ME!!!!!"}),a.data.expand.books?a.data.expand.books.map((l,x)=>e("div",{id:x.toString(),className:"snap-center min-w-max z-50",children:l.coverImage?e("img",{className:"shadow-black h-64 rounded-md shadow-2xl cursor-pointer",src:l.coverImage?N(l.id,l.coverImage):w,onClick:()=>{a.setBookData(l),a.setBookMenu(!0),a.setCurrentIdx(50)}}):e("img",{className:"shadow-black h-64 rounded-md shadow-2xl cursor-pointer",src:w,onClick:()=>{a.setBookData(l),a.setBookMenu(!0),a.setCurrentIdx(50)}})},x.toString())):null,e("div",{className:"min-w-max z-50 text-transparent select-none",children:"AGHHHHHHHHHHHH!!! SAVE ME!!!!!"})]})]}),n("div",{children:[e("h2",{className:"mx-4 text-4xl font-light text-white",children:a.data.name}),e("p",{className:"mx-4 text-white",children:a.data.description})]})]})})}function R(a){const u=a.client,[g,c]=r.exports.useState(""),[d,i]=r.exports.useState(""),[l,x]=r.exports.useState(""),[f,y]=r.exports.useState([]),[m,p]=r.exports.useState([]),b=r.exports.useRef(!1),[k,C]=r.exports.useState(!1),H=async t=>{try{const s=await u.collection("book").getList(1,4,{filter:`name ~ "${t}"`});y(s.items)}catch{}};function S(t){x(t.target.value),H(t.target.value)}function v(t,s){p(o=>[...o,{name:t,id:s}])}return r.exports.useEffect(()=>{b.current||(b.current=!0,c(a.data.name),i(a.data.description),a.data.expand.books!=null&&a.data.expand.books.map(t=>{v(t.name,t.id)}))},[]),n("div",{className:"px-4 text-white",children:[e("h2",{className:" py-2 pr-4 text-lg font-light text-white",children:"Collection Name"}),e("input",{maxLength:100,type:"text",className:"input-text",value:g,onChange:t=>c(t.target.value)}),e("h2",{className:"py-2 pr-4 text-lg font-light text-white",children:"Description"}),e("textarea",{maxLength:5e3,rows:"18",type:"text",autoComplete:"off",className:"input-text",placeholder:"",value:d,onInput:t=>i(t.target.value),onChange:t=>i(t.target.value)}),e("h2",{className:"py-2 pr-4 text-lg font-light text-white",children:"Add Books"}),e("input",{type:"text",value:l,onChange:S,className:"input-text flex items-baseline justify-center",placeholder:"Search"}),f?f.map((t,s)=>n("div",{className:"bg-black/40 flex gap-1 px-2 py-2 my-2 rounded-lg",id:s.toString(),children:[e("div",{className:"min-w-48",style:{minHeight:"6rem",minWidth:"5rem"},children:t.coverImage?e("img",{className:"max-h-32 rounded-md",src:N(t.id,t.coverImage)}):e("img",{className:"max-h-32 rounded-md",src:w})}),n("div",{className:"flex flex-col w-full",children:[e("p",{className:" text-xl text-white",children:t.name?n(h,{children:[t.name.substring(0,18),e("span",{className:"bg-gradient-to-r from-white to-white/0 bg-clip-text text-transparent",children:t.name.substring(18,24)})]}):"Untitled"}),e("p",{className:"text-white/80 text-lg",children:t.author?n(h,{children:[t.author.substring(0,18),e("span",{className:"bg-gradient-to-r from-white/80 to-white/0 bg-clip-text text-transparent",children:t.author.substring(18,24)})]}):"No Author"}),e("div",{className:"space-between flex w-full mt-auto mb-0",children:e("button",{onClick:()=>v(t.name,t.id),className:"secondary-button bg-gray-500/20 ml-auto mr-0",children:"Add"})})]})]},s.toString())):null,e("h2",{className:"pt-2 pr-4 mt-2 text-lg font-light text-white",children:"Preview Books"}),m[0]?null:e("p",{className:"bg-black/40 w-full px-4 py-2 my-4 text-lg text-center text-white rounded-lg",children:"There are no books in this collection"}),e(B,{values:m,onChange:({oldIndex:t,newIndex:s})=>p(I(m,t,s)),renderList:({children:t,props:s,isDragged:o})=>e("ul",{...s,style:{cursor:o?"grabbing":"inherit"},children:t}),renderItem:({value:t,props:s,index:o,isDragged:L})=>e("li",{...s,style:{...s.style,margin:"0.5em 0em",listStyleType:"none",cursor:L?"grabbing":"grab",boxShadow:"0px 0px 0px 0.95px rgba(127,127,127,1)"},className:"backdrop-blur-sm bg-black/60 inner-shadow-main w-full px-4 py-4 my-2 text-white rounded-lg",children:n("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n("div",{className:"flex gap-4",children:[e(F,{}),t.name?n("p",{className:"text-lg",children:[t.name.substring(0,17),e("span",{className:"bg-gradient-to-r from-white to-white/0 bg-clip-text text-transparent",children:t.name.substring(17,22)})]}):"No Name"]})," ",e("button",{onClick:()=>{p(typeof o<"u"?D(m,o):m)},style:P,children:e(W,{})})]})})}),n("div",{className:"flex gap-4 pt-4",children:[e("a",{className:"warning-button cursor-pointer select-none",onClick:()=>a.setDeletePrompt(!0),children:"Delete"}),e("a",{onClick:()=>a.setEditMode(!1),className:"secondary-button ml-auto",children:"Cancel"}),e(A,{onClick:()=>{C(!0)},submitted:k,children:"Submit"})]})]})}const W=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"CurrentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x-circle",children:[e("title",{children:"Remove"}),e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),P={border:"none",margin:0,padding:0,width:"auto",overflow:"visible",cursor:"pointer",background:"transparent"},F=()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})});export{$ as default};
